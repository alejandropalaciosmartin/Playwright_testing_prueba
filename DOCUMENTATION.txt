ğŸ”µğŸŸ¢---------------- DOCUMENTACION PLAYWRIGHT ----------------ğŸ”µğŸŸ¢

- Â¿Que necesitamos para utilizar Playwright?
    -> npm (node package manager) âŒ
    -> Node (execution enviroment) âŒ
    -> Visual Studio Code (IDE) âŒ
    avascript (programming language) âŒ
    -> Playwright (npm package) âŒ
    -> Playwright Test for VSCode (plugin) âŒugins de Playwright integrados que nos van a facilitar la vida a la hora de ejecutar tests.
    

Vamos a partir de que no tenemos nada de lo anterior, asi que vamos a ir poco a poco.

1ï¸âƒ£ -> Primero necesitamos el 'npm'. Para ello nos vamos a la siguiente pÃ¡gina (https://nodejs.org/en/download), descargamos node, y cabe recalcar que el instalador tambiÃ©n lleva el gestor de paquetes Node.js (npm) dentro de Ã©l. Esto significa que no necesitas instalar el npm por separado. AsÃ­ que nos quitamos dos pasos del tirÃ³n.

    -> npm (node package manager) âœ”ï¸
    -> Node (execution enviroment) âœ”ï¸

Para comprobar que se ha instalado bien tanto 'npm', como 'node', podemos abrir la consola de comandos y ejecutar 'node -v' y 'npm -v'.

2ï¸âƒ£ -> DespuÃ©s, instalamos Visual Studio Code desde el siguiente enlace: https://code.visualstudio.com/download. Tenemos que instalar este IDE y no otro porque mÃ¡s adelante veremos que Visual Studio Code tiene plugins que nos hace mas facil el trabajar con Playwright-> 

    -> Visual Studio Code (IDE) âœ”ï¸

3ï¸âƒ£ -> El lenguaje Javascript, es el que vamos a utilizar para generar los scripts para los test, asi que no hay que instalar nada, lo que si hay que instalar es el plugin de Playwright en Visual Studio Code. Para ello nos vamos, en VSCode, al apartado de Extensiones (Ctrl+MayÃºs+X) y en el buscador ponemos 'Playwright Test for VSCode' y lo instalamos'

    -> Javascript (programming language) âœ”ï¸
    -> Playwright Test for VSCode (plugin) âœ”ï¸

4ï¸âƒ£ -> Por Ãºltimo, solo nos falta isntalar el paquete de Playwright con npm. Para ello creamos una carpeta en el lugar que deseemos (es la carpeta donde vamos a hacer nuestros scripts), abrimos la carpeta en VSCode (estarÃ¡ vacÃ­a obviamente) y abrimos una consola de comandos de la carpeta (Ctrl+Ã‘). Escribimos el siguiente comando (( npm init playwright@latest )). AcontinuaciÃ³n, aparecera una serie de pasos:
    â–¶ï¸ Primero preguntarÃ¡ si queremos proceder a instalar Playwright, le decimos que si (poner una 'y')
    â–¶ï¸ En el siguiente paso nos pregunta que lenguaje queremos utilizar, en nuestro caso ponemos TypeScript
    â–¶ï¸ En los siguientes pasos: dejamos el nombre por defecto de 'tests', en el siguiente ponemos false y en el ultimo ponemos true (el ultimo paso es para instalar internamente todo los navegadores para no tener problemas al hacer testing)

    -> Playwright (npm package) âœ”ï¸


Ya tenemos todo configurado para poder comenzar!! ğŸ¥³ğŸ‘Œ




ğŸ”µğŸŸ¢---------------- PRIMEROS TESTS CON PLAYWRIGHT ----------------ğŸ”µğŸŸ¢

â¡ï¸ Por defecto nos creas una carpeta llamada tests, con un archivo con dos test muy sencillos (en esa carpeta es donde vamos a escribir nuestros tests) y otra carpeta llamada 'tests-examples' (estÃ¡ la vamos a borrar ya que no nos hace falta para nada). 

â¡ï¸ Entramos a la carpeta tests y vamos a ver que tiene el archivo 'example.specs.ts'. Como podemos ver tiene dos tests (cada vez que veamos la palabra "test" abriendo parentesis, quiere decir que ahÃ­ dentro hay un test). Para ejecutar los tests, abrimos la consola de comandos (Ctrl+Ã‘) y ejecutamos el siguiente comando -> (( npx playwright test )) (Este comando ejecutara todos los tests que haya en la carpeta tests sin excepciÃ³n alguna)

âœ”ï¸ -> Si sale '6 passed' quiere decir que ha salido todo bien
âŒ -> Al contrario, si sale algun error, este aparecera en rojo y habra que revisar el codigo

    En cualquiera de los dos casos anteriores, la consola de comandos nos sugiere que ejecutemos el siguiente comando: npx playwright show-report. Este comando es para ver paso a paso lo que ha hecho (en el caso de que tengamos algun error, nos viene de escandalo ya que podemos ver donde hemos fallado)




ğŸ”µğŸŸ¢---------------- LOCALIZAR ELEMENTOS CON XPATH ---------------- ğŸ”µğŸŸ¢

-> CÃ“DIGO HTML DE EJEMPLO ğŸ”½
    <html>
        <head>
        </head>
        <body>
            <input type="text" id="name" class="form">
        </body>
    </html>

-> SELECTORES XPATH (ALGUNOS EJEMPLOS) ğŸ”½
    â–¶ï¸ //input[@type='text']
    â–¶ï¸ //input[@id='name']
    â–¶ï¸ //input[@class='form']

-> XPATH => RELATIVE vs ABSOLUTE XPATH
    â–¶ï¸ Absolute path: /html/head/body/div/input
    â–¶ï¸ Relative path: //input




ğŸ”µğŸŸ¢---------------- LOCALIZAR ELEMENTOS CON CSS SELECTOR ---------------- ğŸ”µğŸŸ¢

-> CSS Selectors
    â–¶ï¸ input[type="text"]
    â–¶ï¸ input[id="name"]
    â–¶ï¸ input[class="form"]

-> Shortcuts (una forma de acortar los css selector => input[id="name"] == input#name )
    â–¶ï¸ input.form (by class)
    â–¶ï¸ input#name (by id)




ğŸ”µğŸŸ¢---------------- FUNCIONES XPATH (MÃS LEGIBLE âœï¸) ---------------- ğŸ”µğŸŸ¢

-> ğŸŸ¡getByPlaceholder: <input type="email" placeholder="name@example.com">
    â–¶ï¸ Element type: input
    â–¶ï¸ Properties: placeholder
    â–¶ï¸ Value: name@example.com

-> ğŸŸ¡getByAltText: <img alt='Playwright logo'>
    â–¶ï¸ Element type: img
    â–¶ï¸ Properties: alt
    â–¶ï¸ Value: Playwright logo

-> ğŸŸ¡getByRole: ğŸ”½

        <h3>Sign up</h3>
        <label>
            <input type="checkbox" /> Subscribe
        </label>
        <br/>
        <button>Submit</button>




ğŸ”µğŸŸ¢---------------- ACTUALIZAR VERSIÃ“N PLAYWRIGHT â®ï¸ ---------------- ğŸ”µğŸŸ¢

â¡ï¸ Si nos vamos al archivo de '/package.json', hay una linea que nos dice la versiÃ³n de playwright con la que estamos trabajando -> (("@playwright/test": "^1.42.1")), en este caso la 1.42.1. 

â¡ï¸ Como es lÃ³gico, todas las herramientas tienes actualizaciones donde incluyen mejoras, nuevas funcionalidades, etc. En nuestro caso, para saber si hay alguna version mas nueva de la que tenemos, abrimos una nueva terminal (Ctrl+MayÃºs+Ã‘) y escribimos el comando 'npm outdated @playwright/test'. La columna de 'Current' es la que tenemos y la columna de 'Wanted' es la que queremos, es decir, la ultima que ha salido.

â¡ï¸ Para conseguir dicha version, ejecutamos en la terminal el comando 'npm install -D @playwright/test@latest'. Una vez instalada la Ãºltima version de Playwright, necesitamos tambiÃ©n actualizar la versiÃ³n de los navegadores para que sean compatibles con la Ãºltima versiÃ³n de Playwright. Para ello ejecutamos el comando 'npx playwright install' en la terminal y podemos ver como esta instalando uno por uno la nueva version de los navegadores




ğŸ”µğŸŸ¢---------------- EJECUTAR TESTS EN MÃšLTIPLES ENV. ---------------- ğŸ”µğŸŸ¢

â¡ï¸ Vamos a ver como configurar nuestro 'Playwright' para ejecutar tests en diferentes ambientes (qa, dev, prod, etc), donde cada ambiente tiene una url diferente, unos datos diferentes, etc

â¡ï¸ Para implementar esta nueva caracterÃ­stica, abrimos una nueva terminar (Ctrl+MayÃºs+Ã‘) y ejecutamos el comando 'npm i dotenv --save-dev'. Para comprobar que se ha instalado, podemos ir al archivo 'package.json' en la raÃ­z de nuestro proyecto, y deberÃ­a de aparecer una lÃ­nea tal que asÃ­ -> "dotenv": "^16.4.5" (con vuestra respectiva versiÃ³n)

â¡ï¸ Una vez descargado, vamos a ver como podemos poner en uso esta nueva herramienta. Para ello, primeramente, vamos a crear una carpeta en la raiz de nuestro proyecto que se va a llamar 'env'. Basicamente lo que vamos a guardar en esta carpeta son los diferentes 'environments' con los que vamos a trabajar, para poder guardar variables de cada uno de los environments. 
    
    En mi caso, en la carpeta 'env', voy a crear los archivos '.env.prod' (producciÃ³n), '.env.qa
(testing) y '.env.dev' (desarrollo). En cada uno de estos archivos voy a guardar variables especificas de cada uno.

    En mi caso, en 'dev' voy a guardar la variable -> ((URL='https://dev.saucedemo.com/')), en 'qa' -> 
((URL='https://qa.saucedemo.com/')) y en 'prod' -> ((URL='https://prod.saucedemo.com/')). Ahora solamente nos queda saber como poner en uso esta variables en nuestros scripts.

â¡ï¸ Una vez definidas todas nuestras variables para cada uno de nuestros entornos, vamos a indicarle a playwright de que entorno quiero que coja las variables. Para ello nos dirigimos al archivo 'playwright.config.ts' (se encuentra en la raiz de nuestro proyecto) y donde pone -> // require('dotenv').config(); , tenemos que descomentar esa linea y dentro de los parentesis del 'config' poner esto -> 
{ path: `.env.dev` }. De este modo cogera las variables del entorno que le indiquemos en el parametro de 'path'




ğŸ”µğŸŸ¢---------------- COMO HACER CAPTURAS DE PANTALLA ---------------- ğŸ”µğŸŸ¢

- En algÃºn momento de la ejecuciÃ³n del test, seguramente necesitemos saber algun estado especifico de algun boton, desplegable o de la pagina misma. Para ello es muy Ãºtil hacer capturas de pantalla

- En este caso, Playwright, nos ofrece una funciÃ³n para poder todas las capturas que queramos en el proceso de testeo

- Para ello, en cualquier test y en cualquier momento, vamos a poner la siguiente funcion ->

    â¡ï¸ await page.screenshot({path: })

- En el path, debemos de poner la ruta de la carpeta donde vamos a guardas dichas capturas para poder checkearlas en un futuro

- En nuestro caso para probarlo, vamos a poner esto:

    â¡ï¸ await page.screenshot({path: 'screenshot/login.png' })

- Esto quiere decir que la foto se guardarÃ¡ con el nombre de 'login.png' y se alamcenarÃ¡ en la carpeta 'screenshot'

- Podemos pasarle un parametro mÃ¡s a la funcion 'screenshot' (opcional), que es fullPage: true, para asÃ­ poder hacer una captura a la pÃ¡gina entera (si no se lo ponemos, solo hara a lo que este visible, si tiene scroll o mas contenido debajo no aparecerÃ¡ en la captura) -> 

    â¡ï¸ await page.screenshot({path: 'screenshot/login.png', fullPage: true })




ğŸ”µğŸŸ¢---------------- EJECUTAR TEST POR CONSOLA ---------------- ğŸ”µğŸŸ¢

â¡ï¸ Hasta ahora, ejecutar los test ha sido tarea fÃ¡cil gracias a la extesion de Playwright que nos descargamos al principio, pero... Â¿y si queremos ejecutar los test en la terminal para tener un poco mas de control y ser mas detallados a la hora de ejecutarlos?

â¡ï¸ Para ello, lo primero, abrimos la terminal con Ctrl+Ã‘, y a continuaciÃ³n ponemos 'npx playwright test'. Este comando ejecutara todos los tests que esten en la carpeta 'test'

â¡ï¸ Si queremos ejecutar solamente un test en especifico, ejecutamos los mismo de antes pero pasandole al final la ruta del test que queremos ejecutar